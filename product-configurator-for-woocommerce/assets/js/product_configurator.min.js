var PC=PC||{};PC.fe=PC.fe||{},PC.fe.models=PC.fe.models||{},PC.actionParameter="pc_get_data",function(a,n){"use strict";PC.fe.config=PC.fe.config||PC_config.config,PC.fe.config=n.extend({},PC.fe.config),PC.fe.products_content=PC.fe.products_content||[],a(function(){function t(t){t.preventDefault(),PC.fe.config.current_language&&(PC.fe.lang=PC.fe.config.current_language,PC.utils.add_language_filters(PC.fe.lang));var e,o=a(t.target);if((o=o.is(".configure-product")?o:o.closest(".configure-product")).data("product_id")?(e=o.data("product_id"),o.is(".is-shortcode")?PC.fe.is_using_shortcode=!0:PC.fe.is_using_shortcode=!1):a('*[name="add-to-cart"]').length&&(PC.fe.is_using_shortcode=!1,e=a('*[name="add-to-cart"]').val()),e){var n=!1;o.data("preset")&&((!PC.fe.initial_preset||PC.fe.initial_preset&&PC.fe.initial_preset!=o.data("preset"))&&(n=!0),PC.fe.initial_preset=o.data("preset")),"mkl/pc/inline-init"==t.type&&(PC.fe.inline=!0,PC.fe.inlineTarget=t.target);try{PC.fe.open(e,e,o,n)}catch(t){console.error("we had an error: ",t),console.trace(t)}}else console.log("No product ID was found")}function e(t){t.model.get("angle_switch")&&"no"!=t.model.get("angle_switch")&&!1!==t.model.get("cshow")&&(t=PC.fe.angles.get(t.model.get("angle_switch")))&&!t.get("active")&&(t.collection.each(function(t){t.set("active",!1)}),t.set("active",!0))}PC.utils._isTouch()&&a("body").addClass("is-touch"),PC.utils._isMobile()&&a("body").addClass("is-mobile"),PC.fe.config.open_configurator||new URLSearchParams(location.search).has("open_configurator")&&(PC.fe.config.open_configurator=!0),a("body").on("keydown",function(t){a(this).hasClass("keyboard-navigation")||"Tab"!=t.key||t.ctrlKey||a(this).addClass("keyboard-navigation")}),a("body").on("click",function(t){a(this).hasClass("keyboard-navigation")&&a(this).removeClass("keyboard-navigation")}),PC.fe.product_type=PC.fe.product_type||"simple",a("body").on("click",".configure-product-redq_rental",t),a("body").on("click",".configure-product-simple",t),a("body").on("mkl/pc/inline-init",".mkl-configurator-inline",t),a("form.cart").each(function(t,e){a("body").is(".is_configurable")&&!a("body").is(".enable-add-to-cart")&&a(e).find('button[name="add-to-cart"]').prop("disabled","disabled"),a(e).on("submit",function(t){a("input[name=pc_configurator_data]").val(PC.fe.save_data.save()),""==a("input[name=pc_configurator_data]").val()&&(t.preventDefault(),console.log("empty data"))})}),wp.hooks.addAction("PC.fe.start","mkl/product_configurator",function(t){var e;a('form.cart button[name="add-to-cart"]').prop("disabled",!1),a(document).on("change","form.cart input[name=quantity], .mkl_pc .form input[name=quantity]",function(t){var o=a(this).val();a("form.cart input[name=quantity], .mkl_pc .form input[name=quantity]").each(function(t,e){a(e).val(o)})}),"object"==typeof ctFrontend&&ctFrontend.hasOwnProperty("handleEntryPoints")&&ctFrontend.hasOwnProperty("allFrontendEntryPoints")&&ctFrontend.handleEntryPoints(ctFrontend.allFrontendEntryPoints),a.nmThemeInstance&&a.nmThemeInstance.quantityInputsBindButtons&&a.nmThemeInstance.quantityInputsBindButtons(a(".mkl_pc")),wp.hooks.applyFilters("PC.fe.reset.on.start",!0)&&PC.fe.contents.content.resetConfig(),PC_config.config.swipe_to_change_view&&1<PC.fe.angles.length&&(e={triggerOnTouchEnd:!0,swipeStatus:function(t,e,o,n){var a=PC.fe.angles.findWhere({active:!0}),i=PC.fe.angles.indexOf(a),r=!1,c=0<=i-1&&PC.fe.angles.at(i-1),i=PC.fe.angles.at(i+1);"end"==e&&("right"==o&&c&&(r=c),"left"==o&&i&&(r=i),a)&&r&&(a.set("active",!1),r.set("active",!0))},allowPageScroll:"vertical",threshold:75},a(".mkl_pc_layers").swipe(e))},20),wp.hooks.addAction("PC.fe.start","mkl/product_configurator",function(t){setTimeout(function(){PC_config.config.load_config_content&&Array.isArray(PC_config.config.load_config_content)?PC.fe.setConfig(PC_config.config.load_config_content):PC.fe.initial_preset&&PC.fe.setConfig(PC.fe.initial_preset)},300)},50),wp.hooks.addAction("PC.fe.start","mkl/product_configurator",function(t){setTimeout(function(){wp.hooks.addAction("PC.fe.layer.activate","mkl/product_configurator",e,20),wp.hooks.addAction("PC.fe.choice.activate","mkl/product_configurator",e,20)},310)},55),PC_config.config.open_first_layer&&wp.hooks.addAction("PC.fe.start","mkl/product_configurator",function(t){t=t.$(".layer-item:visible").first();t.parent().is(".display-mode-dropdown")||t.trigger("click")},60),a(".mkl-configurator-inline").trigger("mkl/pc/inline-init"),PC.fe.config.open_configurator&&1==PC.fe.config.open_configurator&&!a(".mkl-configurator-inline").length&&a(".configure-product-simple").first().trigger("click")}),PC.fe.init=function(t,e,o){PC.fe.is_using_shortcode&&(this.options={}),PC.fe.trigger_el=o,e?(this.currentProductData=PC.productData["prod_"+e],this.layers=new PC.layers(PC.productData["prod_"+e].layers),this.angles=new PC.angles(PC.productData["prod_"+e].angles)):(this.currentProductData=PC.productData["prod_"+t],this.layers=new PC.layers(PC.productData["prod_"+t].layers),this.angles=new PC.angles(PC.productData["prod_"+t].angles)),a(o).data("force_form")&&(PC.fe.currentProductData.product_info.force_form=!0),PC.fe.product_type=this.currentProductData.product_info.product_type,o&&o.data("price")?(this.currentProductData.product_info.price=o.data("price"),this.currentProductData.product_info.regular_price=o.data("regular_price"),this.currentProductData.product_info.is_on_sale=1==o.data("is_on_sale")):this.currentProductData.product_info.price=0,("simple"===PC.fe.product_type&&PC.productData["prod_"+t]||"variation"===PC.fe.product_type&&PC.productData["prod_"+t])&&(this.contents=PC.fe.setContent.parse(PC.productData["prod_"+t]),this.modal.$el.trigger("content-is-loaded")),a(document.body).trigger("mkl-pc-init",t,e),wp.hooks.doAction("PC.fe.init",t,e)},PC.fe.open=function(e,o,n,t){PC.fe.opened=!0,wp.hooks.doAction("PC.fe.before_open"),a("body").addClass("configurator_is_opened"),PC.fe.inline&&a("body").addClass("configurator_is_inline"),e==PC.fe.active_product?(this.modal.open(),t&&PC.fe.modal&&PC.fe.modal.resetConfig()):(e!=PC.fe.active_product&&this.modal&&(this.modal.remove(),this.modal=null,wp.hooks.doAction("PC.fe.reset_product")),PC.fe.active_product=e,PC.fe.parent_product=o||e,PC.productData&&PC.productData["prod_"+o]?(this.modal=this.modal||new PC.fe.views.configurator({product_id:e,parent_id:o}),PC.fe.init(e,o,n)):PC.productDataMode&&"json"==PC.productDataMode?wp.hooks.addAction("mkl_pc.product_data.loaded","mkl_pc",function(t){t==e&&(this.modal=this.modal||new PC.fe.views.configurator({product_id:e,parent_id:o}),PC.fe.init(e,o,n))}.bind(this)):n.after(a("<div>Error loading the configurator data</div>")))},PC.fe.close=function(){this.modal&&this.modal.close()},PC.fe.setContent={url:function(){var t=PC.actionParameter;return ajaxurl+"?action="+t+"&data=content&id="+this.id},idAttribute:"product_id",defaults:{product_type:"simple",modified:!1},parse:function(t){wp.hooks.doAction("PC.fe.setContent.parse.before",t);var o=new PC.content_list;return!t instanceof Object||null==t.content||0==t.content||"false"==t.content?o:(a.each(t.content,function(t,e){e=n.clone(e);e.choices&&0<e.choices.length&&PC.fe.layers.get(e.layerId)&&(e.choices=new PC.choices(e.choices,{layer:PC.fe.layers.get(e.layerId)}),o.add(e))}),{content:o})}},PC.fe.getLayerContent=PC.fe.get_layer_content=function(t){return!!PC.fe.contents.content.get(t)&&PC.fe.contents.content.get(t).attributes.choices},PC.fe.get_choice_model=function(t,e){t=PC.fe.get_layer_content(t);return!(!t||!e)&&t.get(e)},PC.fe.fetchContent=function(e){PC.fe.products_content[e]?(this.contents=PC.fe.products_content[e],this.modal.$el.trigger("content-is-loaded","an argument")):(this.modal.$el.show(),this.modal.$el.addClass("loading"),a.ajax({url:wp.ajax.settings.url,type:"POST",dataType:"json",data:{action:PC.actionParameter,data:"content",id:e},context:this}).done(function(t){this.modal.$el.removeClass("loading"),n.isObject(t)&&t.content?(this.contents=PC.fe.setContent.parse(t),PC.fe.products_content[e]=this.contents,t.conditions&&(PC.productData["prod_"+e]=PC.productData["prod_"+e]||{},PC.productData["prod_"+e].conditions=t.conditions),a(PC.fe).trigger("variation_content_loaded",{response:t,product_id:e}),wp.hooks.doAction("variation_content_loaded",{response:t,product_id:e}),this.modal.$el.trigger("content-is-loaded")):(alert("Couldn't load Data for this product."),1!=PC.fe.inline&&this.modal.remove())}).fail(function(){console.log("error"),this.modal.$el.addClass("loading")}))},PC.fe.fetchedContent=function(t,e,o){console.log("fetched content")},PC.fe.setConfig=function(t){PC.fe.is_setting_config=!0,wp.hooks.doAction("PC.fe.setConfig.before",t),PC.fe.contents.content.resetConfig(),a.each(t,function(t,e){try{var o=PC.fe.layers.get(e.layer_id);o&&"group"==o.get("type")||(PC.fe.getLayerContent(e.layer_id)&&PC.fe.getLayerContent(e.layer_id).selectChoice&&PC.fe.getLayerContent(e.layer_id).selectChoice(e.choice_id,!0),wp.hooks.doAction("PC.fe.setConfig.setItem",e,PC.fe.getLayerContent(e.layer_id)))}catch(t){console.log("Product configurator - setConfig: Could not set this layer:",e.layer_id,t)}}),wp.hooks.doAction("PC.fe.setConfig",t),PC.fe.is_setting_config=!1},a(document).on("yith_wacp_adding_cart_single",function(){PC&&PC.fe&&PC.fe.modal&&PC.fe.modal.$el.addClass("adding-to-cart")}),a(document).on("yith_wacp_popup_after_opening",function(){PC&&PC.fe&&PC.fe.modal&&PC.fe.modal.$el.removeClass("adding-to-cart")})}(jQuery,PC._us||window._),PC.utils=PC.utils||{_isTouch:function(){return"ontouchstart"in window||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints},_isMobile:function(){return!!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/)},formatMoney:function(t,e){return(e=void 0===e?!0:e)&&(t=this.maybeConvertAmountToCurrency(t)),"undefined"==typeof accounting?t:accounting.formatMoney(t,{precision:PC_config.lang.money_precision,symbol:PC_config.lang.money_symbol,decimal:PC_config.lang.money_decimal,thousand:PC_config.lang.money_thousand,format:PC_config.lang.money_format})},maybeConvertAmountToCurrency:function(t){var e;return"undefined"!=typeof woocs_current_currency&&"undefined"!=woocs_current_currency.rate?t*woocs_current_currency.rate:void 0!==PC.fe.config.wcml_rate&&parseFloat(PC.fe.config.wcml_rate)?t*parseFloat(PC.fe.config.wcml_rate):"undefined"!=typeof wc_aelia_currency_switcher_params&&"undefined"!=wc_aelia_currency_switcher_params.current_exchange_rate_from_base&&0<parseFloat(wc_aelia_currency_switcher_params.current_exchange_rate_from_base)?t*parseFloat(wc_aelia_currency_switcher_params.current_exchange_rate_from_base):void 0!==PC.fe.config.wcpbc_rate&&parseFloat(PC.fe.config.wcpbc_rate)?(e=t*parseFloat(PC.fe.config.wcpbc_rate),PC.fe.config.wcpbc_round_nearest?Math.ceil(e/PC.fe.config.wcpbc_round_nearest)*PC.fe.config.wcpbc_round_nearest:e):t},add_language_filters:function(e){function t(t){return t["name_"+e]&&""!=t["name_"+e].trim()&&(t.name=t["name_"+e]),t["description_"+e]&&""!=t["description_"+e].trim()&&(t.description=t["description_"+e]),t}wp.hooks.addFilter("PC.fe.configurator.layer_data","mkl/product_configurator",t,10),wp.hooks.addFilter("PC.fe.configurator.choice_data","mkl/product_configurator",t,10),wp.hooks.addFilter("PC.fe.configurator.angle_data","mkl/product_configurator",t,10)}};